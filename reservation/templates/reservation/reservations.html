{% extends 'main.html' %}
{% load static %}

{% block styleshets %}
{% endblock %}

{% block content %}
<h1 class="pt-5 mt-5 ps-3">Mes réservations ! ! !</h1>

<div class="container py-5">

    {% for message in messages %}
        {% if message.tags == 'success' %}
            <div class="alert alert-success alert-dismissible d-flex justify-content-center" role="alert">
        <div>
            <img src="{% static 'images/logo.png' %}" alt="logo entreprise"
            style="width:60px;border-radius: 50%;">
        </div>
        <div>
            <a href="{% url 'reservation:user_new_reservation' %}" class="close" data-dismiss="alert"
            aria-label="close">&times;</a>
            {{ message|safe|escape }}
        </div>
        </div>
        {% elif message.tags == 'error' %}
            <div class="alert alert-success alert-dismissible d-flex justify-content-center" role="alert">
        <div>
            <img src="{% static 'images/logo.png' %}" alt="logo entreprise"
            style="width:60px;border-radius: 50%;">
        </div>
        <div>
            <a href="{% url 'reservation:user_new_reservation' %}" class="close" data-dismiss="alert"
            aria-label="close">&times;</a>
            {{ message|safe|escape }}
        </div>
        </div>
        {% endif %}
    {% endfor %}

    <table class="table table-striped table-warning">
        <thead>
        <tr>
            <th scope="col">ID reserv</th>
            <th scope="col">Nom</th>
            <th scope="col">Adresse</th>
            <th scope="col">Code Postal</th>
            <th scope="col">Vile</th>
            <th scope="col">Date</th>
            <th scope="col">Heure</th>
            <th scope="col">Message</th>
            <th scope="col">Validé ?</th>
            <th scope="col">user_id</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for reservation in reservations %}
            {% if reservation %}
                <tr>
                    <td scope="row">{{ reservation.id }}</td>
                    <td scope="row">{{ reservation.fullName }}</td>
                    <td scope="row">{{ reservation.adress }}</td>
                    <td scope="row">{{ reservation.zip_code }}</td>
                    <td scope="row">{{ reservation.city }}</td>
                    <td scope="row">{{ reservation.date }}</td>
                    <td scope="row">{{ reservation.hour }}</td>
                    <td scope="row">{{ reservation.message }}</td>
                    <td scope="row">{{ reservation.accepted }}</td>
                    <td scope="row">{{ reservation.user_id }}</td>
                    <td scope="row">
                        <a href="{% url 'reservation:user_update_reservation' reservation.id %}">Editer</a>
                        <a href="{% url 'reservation:user_delete_reservation' reservation.id %}">Supprimer</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="7">Aucune reservation !</td>
                </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table>
    
<!--    -->
    <div>
        <a href="{% url 'reservation:user_new_reservation' %}">Nouvelle réservation</a>
    </div>
</div>

{% endblock %}
